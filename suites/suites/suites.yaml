templates:

  - &hp_openstack_properties
    ubuntu_image_name: Ubuntu Server 12.04.2 LTS (amd64 20130318) - Partner Image
    ubuntu_trusty_image_name: Ubuntu Server 14.04.1 LTS (amd64 20140927) - Partner Image
    centos_image_name: CentOS 6.3 Server 64-bit 20130116
    centos_image_user: root
    flavor_name: standard.small
    ubuntu_image_id: 261844b3-479c-5446-a2c4-1ea95d53b668
    ubuntu_trusty_image_id: 9d25fe2d-cf31-4b05-8c58-f238ec78e633
    small_flavor_id: 101

  #######################################################

  - &hp_openstack_system_tests_region_a_inputs
    keystone_tenant_name: cloudify-cosmo-system-tests
    region: region-a.geo-1

  - &hp_openstack_system_tests_region_b_inputs
    keystone_tenant_name: cloudify-cosmo-system-tests
    region: region-b.geo-1

  - &hp_openstack_system_tests2_region_a_inputs
    keystone_tenant_name: cloudify-cosmo-system-tests2
    region: region-a.geo-1

  - &hp_openstack_system_tests2_region_b_inputs
    keystone_tenant_name: cloudify-cosmo-system-tests2
    region: region-b.geo-1

  #######################################################

  - &hp_openstack_dockerless_system_tests_region_a_inputs
    image_id: 75d47d10-fef8-473b-9dd1-fe2f7649cb41
    keystone_tenant_name: cloudify-cosmo-system-tests
    region: region-a.geo-1

  - &hp_openstack_dockerless_system_tests_region_b_inputs
    image_id: 75d47d10-fef8-473b-9dd1-fe2f7649cb41
    keystone_tenant_name: cloudify-cosmo-system-tests
    region: region-b.geo-1

  - &hp_openstack_dockerless_system_tests2_region_a_inputs
    image_id: 75d47d10-fef8-473b-9dd1-fe2f7649cb41
    keystone_tenant_name: cloudify-cosmo-system-tests2
    region: region-a.geo-1

  - &hp_openstack_dockerless_system_tests2_region_b_inputs
    image_id: 75d47d10-fef8-473b-9dd1-fe2f7649cb41
    keystone_tenant_name: cloudify-cosmo-system-tests2
    region: region-b.geo-1

#####################################################################################

handler_configurations:

  # hp openstack system tests tenant/region matrix
  hp_openstack_system_tests_region_a:
    inputs: inputs-hp-openstack.json
    handler: openstack
    manager_blueprint: openstack-docker/openstack-docker.yaml
    properties: *hp_openstack_properties
    inputs_override: *hp_openstack_system_tests_region_a_inputs

  hp_openstack_system_tests_region_b:
    inputs: inputs-hp-openstack.json
    handler: openstack
    manager_blueprint: openstack-docker/openstack-docker.yaml
    properties: *hp_openstack_properties
    inputs_override: *hp_openstack_system_tests_region_b_inputs

  hp_openstack_system_tests2_region_a:
    inputs: inputs-hp-openstack.json
    handler: openstack
    manager_blueprint: openstack-docker/openstack-docker.yaml
    properties: *hp_openstack_properties
    inputs_override: *hp_openstack_system_tests2_region_a_inputs

  hp_openstack_system_tests2_region_b:
    inputs: inputs-hp-openstack.json
    handler: openstack
    manager_blueprint: openstack-docker/openstack-docker.yaml
    properties: *hp_openstack_properties
    inputs_override: *hp_openstack_system_tests2_region_b_inputs

  ############################################################################

  hp_openstack_centos_system_tests_region_b:
    inputs: inputs-hp-openstack.json
    handler: openstack
    manager_blueprint: openstack-docker/openstack-docker.yaml
    properties: *hp_openstack_properties
    inputs_override:
      image_id: 25bfd0c1-8f20-4e8f-a5cf-36ca825305f2
      manager_server_user: centos
      keystone_tenant_name: cloudify-cosmo-system-tests
      region: region-b.geo-1

  ############################################################################

  hp_openstack_dockerless_system_tests_region_a:
    inputs: inputs-hp-openstack.json
    handler: openstack
    manager_blueprint: openstack/openstack.yaml
    bootstrap_using_docker: false
    properties: *hp_openstack_properties
    inputs_override: *hp_openstack_dockerless_system_tests_region_a_inputs

  hp_openstack_dockerless_system_tests_region_b:
    inputs: inputs-hp-openstack.json
    handler: openstack
    manager_blueprint: openstack/openstack.yaml
    bootstrap_using_docker: false
    properties: *hp_openstack_properties
    inputs_override: *hp_openstack_dockerless_system_tests_region_b_inputs

  hp_openstack_dockerless_system_tests2_region_a:
    inputs: inputs-hp-openstack.json
    handler: openstack
    manager_blueprint: openstack/openstack.yaml
    bootstrap_using_docker: false
    properties: *hp_openstack_properties
    inputs_override: *hp_openstack_dockerless_system_tests2_region_a_inputs

  hp_openstack_dockerless_system_tests2_region_b:
    inputs: inputs-hp-openstack.json
    handler: openstack
    manager_blueprint: openstack/openstack.yaml
    bootstrap_using_docker: false
    properties: *hp_openstack_properties
    inputs_override: *hp_openstack_dockerless_system_tests2_region_b_inputs

  #############################################################################

  hp_openstack_provider:
    inputs: cloudify-config-hp-openstack.yaml
    handler: openstack
    bootstrap_using_providers: true
    bootstrap_using_docker: false
    properties: *hp_openstack_properties

  #############################################################################

  pclab47_devstack_nova_net:
    inputs: inputs-nova-net-devstack.json
    handler: openstack_nova_net
    manager_blueprint: openstack-nova-net/openstack.yaml
    bootstrap_using_docker: false
    properties:
      ubuntu_image_name: ubuntu
      flavor_name: m1.small
      ubuntu_image_id: eada2fe8-894a-4b26-ac8d-cedab010f185
      small_flavor_id: 3

  ###############################################################################

  aws_ec2:
    inputs: cloudify-config-ec2.yaml
    handler: ec2
    bootstrap_using_providers: true
    bootstrap_using_docker: false
    properties:
      medium_instance_type: m1.medium
      ubuntu_agent_ami: ami-a73264ce

  ################################################################################

  vsphere:
    inputs: inputs-vsphere.json
    handler: vsphere
    manager_blueprint: manager_blueprint/vsphere.yaml
    bootstrap_using_docker: false
    properties:
      template: ubuntu-configured-template

  my_conf:
    inputs: inputs-softlayer.json
    handler: softlayer_plugin.softlayer
    external:
      repo: cloudify-softlayer-plugin
    manager_blueprint: softlayer/softlayer.yaml
    properties:
      ...

#####################################################################################

tests:

  openstack_blueprints:
    tests:
      - cosmo_tester/test_suites/test_blueprints

  openstack_blueprints_without_chef_puppet:
    - cosmo_tester/test_suites/test_blueprints -e puppet -e chef

  openstack_chef_puppet_blueprints:
    tests:
      - cosmo_tester/test_suites/test_blueprints/chef_plugin_test.py
      - cosmo_tester/test_suites/test_blueprints/puppet_plugin_test.py

  manager_status:
    tests:
      - cosmo_tester/test_suites/test_manager_status

  openstack_plugin:
    tests:
      - cosmo_tester/test_suites/test_openstack_plugin

  docker_centos:
    tests:
      - cosmo_tester/test_suites/test_docker_centos_env

  openstack_provider_openstack_env:
    tests:
      - cosmo_tester/test_suites/test_openstack_env

  ec2_blueprints:
    tests:
      - cosmo_tester/test_suites/ec2_test_blueprints

  vsphere_blueprints:
    tests:
      - cosmo_tester/test_suites/vsphere_test_blueprints

  softlayer_blueprints:
    external:
      repo: cloudify-softlayer-plugin
    tests:
      - softlayer_plugin/system_tests/manager
      - softlayer_plugin/system_tests/local

#####################################################################################

test_suites:

  hp_openstack_blueprints_no_chef_puppet:
    handler_configuration: hp_openstack_system_tests_region_a
    tests:
      - openstack_blueprints_without_chef_puppet

  hp_openstack_chef_puppet:
    handler_configuration: hp_openstack_system_tests_region_b
    tests:
      - openstack_blueprints

  hp_openstack_manager_status:
    handler_configuration: hp_openstack_system_tests2_region_a
    tests:
      - manager_status

  hp_openstack_plugin_tests:
    handler_configuration: hp_openstack_system_tests2_region_b
    tests:
      - openstack_plugin

  #####################################################################

  dockerless_hp_openstack_blueprints_no_chef_puppet:
    handler_configuration: hp_openstack_dockerless_system_tests_region_a
    tests:
      - openstack_blueprints_without_chef_puppet

  dockerless_hp_openstack_chef_puppet:
    handler_configuration: hp_openstack_dockerless_system_tests_region_b
    tests:
      - openstack_blueprints

  dockerless_hp_openstack_manager_status:
    handler_configuration: hp_openstack_dockerless_system_tests2_region_a
    tests:
      - manager_status

  dockerless_hp_openstack_plugin_tests:
    handler_configuration: hp_openstack_dockerless_system_tests2_region_b
    tests:
      - openstack_plugin

  #####################################################################

  pclab47_devstack_nova_net:
    handler_configuration: pclab47_devstack_nova_net
    tests:
      - cosmo_tester/test_suites/test_openstack_nova_net

  #####################################################################

  docker_centos_on_openstack:
    handler_configuration: hp_openstack_centos_system_tests_region_b
    tests:
      - cosmo_tester/test_suites/test_docker_centos_env

  ######################################################################

  provider_hp_openstack_all:
    handler_configuration: hp_openstack_provider
    tests:
      - openstack_blueprints
      - manager_status
      - openstack_provider_openstack_env

  provider_hp_openstack_blueprints:
    handler_configuration: hp_openstack_provider
    tests:
      - openstack_blueprints

  provider_hp_openstack_env:
    handler_configuration: hp_openstack_provider
    tests:
      - openstack_provider_openstack_env

  #######################################################################

  aws_ec2:
    handler_configuration: aws_ec2
    tests:
      - ec2_blueprints

  ########################################################################

  vsphere:
    handler_configuration: vsphere
    tests:
      - vsphere_blueprints

  softlayer:
    handler_configuration: softlayer
    tests:
      - softlayer_blueprints
      - cosmo_tester/.../
      - external: git/fdafdsa
        tests:
          - fdaf
          - fdafds
          - fdafads
